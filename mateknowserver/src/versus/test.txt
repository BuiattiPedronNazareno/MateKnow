// Cargar Socket.IO desde CDN
const script = document.createElement('script');
script.src = 'https://cdn.socket.io/4.7.2/socket.io.min.js';
script.onload = () => {
  console.log('âœ… Socket.IO cargado');
  
  // Obtener token del localStorage
  const token = localStorage.getItem('access_token');
  console.log('ðŸ”‘ Token:', token ? 'Encontrado' : 'NO ENCONTRADO');
  
  if (!token) {
    console.error('âŒ No hay token. Haz login primero.');
    return;
  }
  
  // Conectar al WebSocket
  console.log('ðŸ”Œ Conectando a ws://localhost:4000/versus...');
  
  const socket = io('http://localhost:4000/versus', {
    query: { token },
    transports: ['websocket', 'polling']
  });

  socket.on('connect', () => {
    console.log('âœ… Socket conectado! ID:', socket.id);
  });

  socket.on('connected', (data) => {
    console.log('ðŸŽ‰ MENSAJE DEL SERVIDOR:', data);
  });

  socket.on('error', (err) => {
    console.error('âŒ Error del servidor:', err);
  });

  socket.on('connect_error', (err) => {
    console.error('âŒ Error de conexiÃ³n:', err.message);
    console.error('Detalles:', err);
  });
  
  socket.on('disconnect', (reason) => {
    console.warn('âš ï¸ Desconectado:', reason);
  });
  
  // Guardar referencia global para pruebas
  window.testSocket = socket;
  console.log('ðŸ’¾ Socket guardado en window.testSocket');
};

script.onerror = () => {
  console.error('âŒ Error cargando Socket.IO desde CDN');
};

document.head.appendChild(script);
SCRIPT 2:

// Buscar partida
window.testSocket.emit('search-match', {});

// Escuchar respuesta
window.testSocket.on('searching', (data) => {
  console.log('ðŸ” Buscando partida:', data);
});

window.testSocket.on('match-found', (data) => {
  console.log('ðŸŽ¯ PARTIDA ENCONTRADA!', data);
});


SCRIPT 3 (turno):

// Seleccionar la primera pregunta (q1)
window.testSocket.emit('select-question', {
  lobbyId: 'lobby_1763506278398_zddfjkzwk',
  questionId: 'q1'
});

// Escuchar respuesta
window.testSocket.on('question-selected', (data) => {
  console.log('âœ… Pregunta seleccionada:', data);
});

window.testSocket.on('opponent-selected', (data) => {
  console.log('ðŸ‘¤ Tu rival seleccionÃ³:', data);
});

SCRIPT 3 (sin turno)

window.testSocket.on('question-selected', (data) => {
  console.log('âœ… Pregunta seleccionada:', data);
});

window.testSocket.on('opponent-selected', (data) => {
  console.log('ðŸ‘¤ Tu rival seleccionÃ³:', data);
});


SCRIPT 4 (turno)

window.testSocket.emit('select-question', { lobbyId: 'lobby_1763506278398_zddfjkzwk', questionId: 'q1' });

SCRIPT 4 (sin turno)

window.testSocket.emit('select-question', { lobbyId: 'lobby_1763506278398_zddfjkzwk', questionId: 'q5' });







Ranking de la clase? metricas

menu especial cuando alguien abandona.

boton de jugar otra vez, que pasa exactamente

