// Cargar Socket.IO desde CDN
const script = document.createElement('script');
script.src = 'https://cdn.socket.io/4.7.2/socket.io.min.js';
script.onload = () => {
  console.log('‚úÖ Socket.IO cargado');
  
  // Obtener token del localStorage
  const token = localStorage.getItem('access_token');
  console.log('üîë Token:', token ? 'Encontrado' : 'NO ENCONTRADO');
  
  if (!token) {
    console.error('‚ùå No hay token. Haz login primero.');
    return;
  }
  
  // Conectar al WebSocket
  console.log('üîå Conectando a ws://localhost:4000/versus...');
  
  const socket = io('http://localhost:4000/versus', {
    query: { token },
    transports: ['websocket', 'polling']
  });

  socket.on('connect', () => {
    console.log('‚úÖ Socket conectado! ID:', socket.id);
  });

  socket.on('connected', (data) => {
    console.log('üéâ MENSAJE DEL SERVIDOR:', data);
  });

  socket.on('error', (err) => {
    console.error('‚ùå Error del servidor:', err);
  });

  socket.on('connect_error', (err) => {
    console.error('‚ùå Error de conexi√≥n:', err.message);
    console.error('Detalles:', err);
  });
  
  socket.on('disconnect', (reason) => {
    console.warn('‚ö†Ô∏è Desconectado:', reason);
  });
  
  // Guardar referencia global para pruebas
  window.testSocket = socket;
  console.log('üíæ Socket guardado en window.testSocket');
};

script.onerror = () => {
  console.error('‚ùå Error cargando Socket.IO desde CDN');
};

document.head.appendChild(script);
SCRIPT 2:

// Buscar partida
window.testSocket.emit('search-match', {});

// Escuchar respuesta
window.testSocket.on('searching', (data) => {
  console.log('üîç Buscando partida:', data);
});

window.testSocket.on('match-found', (data) => {
  console.log('üéØ PARTIDA ENCONTRADA!', data);
});


SCRIPT 3 (turno):

// Seleccionar la primera pregunta (q1)
window.testSocket.emit('select-question', {
  lobbyId: 'lobby_1763506278398_zddfjkzwk',
  questionId: 'q1'
});

// Escuchar respuesta
window.testSocket.on('question-selected', (data) => {
  console.log('‚úÖ Pregunta seleccionada:', data);
});

window.testSocket.on('opponent-selected', (data) => {
  console.log('üë§ Tu rival seleccion√≥:', data);
});

SCRIPT 3 (sin turno)

window.testSocket.on('question-selected', (data) => {
  console.log('‚úÖ Pregunta seleccionada:', data);
});

window.testSocket.on('opponent-selected', (data) => {
  console.log('üë§ Tu rival seleccion√≥:', data);
});


SCRIPT 4 (turno)

window.testSocket.emit('select-question', { lobbyId: 'lobby_1763506278398_zddfjkzwk', questionId: 'q1' });

SCRIPT 4 (sin turno)

window.testSocket.emit('select-question', { lobbyId: 'lobby_1763506278398_zddfjkzwk', questionId: 'q5' });







Ranking de la clase? metricas

menu especial cuando alguien abandona.

boton de jugar otra vez, que pasa exactamente

Mas tipos de ejercicios

cuando terminas de responder, pesta√±a de espera

Cuando el rival abandona, no se vuelve a la pesta√±a de clase

cuando se crea una lobby, no importa en que clase estes, siempre aparecen las mismas preguntas